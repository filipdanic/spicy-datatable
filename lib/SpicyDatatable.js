!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define("SpicyDatatable",["react"],t):"object"==typeof exports?exports.SpicyDatatable=t(require("react")):e.SpicyDatatable=t(e.React)}(this,function(e){return function(e){function t(r){if(a[r])return a[r].exports;var n=a[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(1),u=r(l),p=a(2),c=r(p),f=a(7),y=r(f),d=a(8),P=r(d),h=a(9),b=r(h),g=a(4),m=a(12),v=a(6),T={},_=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handlePagination=a.handlePagination.bind(a),a.handlePageSizeChange=a.handlePageSizeChange.bind(a),a.handleSearchQueryChange=a.handleSearchQueryChange.bind(a);var r=(0,m.getSafely)(T,e.tableKey).itemsPerPage||e.config&&e.config.itemsPerPageOptions?e.config.itemsPerPageOptions[0]:10;if(a.state={itemsPerPage:r,currentPage:(0,m.getSafely)(T,e.tableKey).currentPage||1,searchQuery:(0,m.getSafely)(T,e.tableKey).searchQuery||""},a.state.searchQuery.length>0){var i=e.customFilter?e.customFilter:m.filterRows,s=i(e.rows,e.columns,a.state.searchQuery)||[];a.state.filteredRows=s}return a}return i(t,e),s(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.scheduleQueryChange)}},{key:"componentDidUpdate",value:function(e,t){if(e.tableKey!==this.props.tableKey){var a=(0,m.getSafely)(T,this.props.tableKey).itemsPerPage||this.props.config&&this.props.config.itemsPerPageOptions?this.props.config.itemsPerPageOptions[0]:10,r=(0,m.getSafely)(T,this.props.tableKey).currentPage||1;this.setState({currentPage:r,itemsPerPage:a})}}},{key:"render",value:function(){var e=this.props,t=e.columns,a=e.rows,r=void 0===a?[]:a,n=e.config,o=void 0===n?{}:n,i=this.state||{},s=i.itemsPerPage,l=i.currentPage,p=i.searchQuery,f=void 0===p?"":p,d=i.filteredRows,h=void 0===d?[]:d,g=o.itemsPerPageOptions,m=o.itemsPerPageLabel,T=o.nextPageLabel,_=o.previousPageLabel,O=o.searchLabel,S=o.searchPlaceholder,w=o.noEntriesLabel,C=o.entryCountLabels,k=(o.customFilter,f.length>0),D=k?h:r,E=l*s,L=D&&D.length>0?D.slice((l-1)*s,E):[],j=k?D.length:r.length,R=(l-1)*s+1,x=E>j?j:E,M=C||v.SpicyDatatableDefaults.entryCountLabels;return u.default.createElement("div",null,u.default.createElement(c.default,{itemsPerPage:s,itemsPerPageOptions:g,itemsPerPageLabel:m,onPageSizeChange:this.handlePageSizeChange,onSearch:this.handleSearchQueryChange,searchValue:f,searchLabel:O,searchPlaceholder:S}),u.default.createElement("table",{className:"spicy-datatable"},(0,y.default)({columns:t}),u.default.createElement("tbody",null,(0,P.default)({columns:t,rows:L}))),u.default.createElement("div",{className:"spicy-datatable-counter"},j>0?u.default.createElement("p",null,M[0]," ",R," ",M[1]," ",x," ",M[2]," ",j," ",M[3]):u.default.createElement("p",null,w||v.SpicyDatatableDefaults.noEntiresLabel)),u.default.createElement(b.default,{onPage:this.handlePagination,itemsPerPage:s,total:j,activePage:l,nextPageLabel:T,previousPageLabel:_}))}},{key:"handlePagination",value:function(e){var t=this.props.tableKey;this.setState({currentPage:e}),(0,m.setSafely)(T,t,"currentPage",e)}},{key:"handleSearchQueryChange",value:function(e){var t=this,a=this.props,r=a.columns,n=a.rows,o=a.config,i=void 0===o?{}:o,s=e.target.value,l=this.props.tableKey,u=i.customFilter;this.scheduleQueryChange&&clearTimeout(this.scheduleQueryChange),this.scheduleQueryChange=setTimeout(function(){var e=u?u:m.filterRows,a=(0===s.length?[]:e(n,r,s))||[];t.setState({filteredRows:a,searchQuery:s,currentPage:1}),(0,m.setSafely)(T,l,"searchQuery",s),(0,m.setSafely)(T,l,"currentPage",1)},200)}},{key:"handlePageSizeChange",value:function(e){var t=e.target.value,a=this.props.tableKey;this.setState({itemsPerPage:Number(t),currentPage:1}),(0,m.setSafely)(T,a,"itemsPerPage",Number(t)),(0,m.setSafely)(T,a,"currentPage",1)}}]),t}(l.Component);_.propTypes=g.SpicyDatatablePropTypes,t.default=_},function(t,a){t.exports=e},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(1),u=r(l),p=a(3),c=r(p),f=a(5),y=r(f),d=a(4),P=a(6),h=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.itemsPerPage,a=e.itemsPerPageLabel,r=e.itemsPerPageOptions,n=e.onSearch,o=e.searchValue,i=e.onPageSizeChange,s=e.searchLabel,l=e.searchPlaceholder,p=r||P.DatatableOptionsDefaults.pageSizeOptions;return u.default.createElement("div",{className:"spicy-datatableoptions-wrapper"},(0,c.default)({label:a||P.DatatableOptionsDefaults.itemsPerPageLabel,onChange:i,value:t,options:p}),(0,y.default)({label:s||P.DatatableOptionsDefaults.searchLabel,value:o,onChange:n,placeholder:l||P.DatatableOptionsDefaults.searchPlaceholder}))}}]),t}(l.Component);h.propTypes=d.DatatableOptionsPropTypes,t.default=h},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),o=r(n),i=a(4),s=function(e){var t=e.label,a=e.onChange,r=e.value,n=e.options;return o.default.createElement("div",{className:"spicy-datatableoptions-sizepicker"},t,o.default.createElement("select",{onChange:a,value:r,className:"spicy-datatableoptions-sizepicker--selectfield"},n.map(function(e,t){return o.default.createElement("option",{key:"select-"+e+"-{i}",value:e},e)})))};s.propTypes=i.DatatablePageSizePickerPropTypes,t.default=s},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpicyDatatablePropTypes=t.DatatableRowsPropTypes=t.DatatableHeaderPropTypes=t.Header=t.Rows=t.DatatableSearchBarPropTypes=t.DatatablePageSizePickerPropTypes=t.DatatableOptionsPropTypes=void 0;var r=a(1),n=(t.DatatableOptionsPropTypes={itemsPerPage:r.PropTypes.number.isRequired,searchValue:r.PropTypes.string.isRequired,onSearch:r.PropTypes.func.isRequired,onPageSizeChange:r.PropTypes.func.isRequired,itemsPerPageOptions:r.PropTypes.arrayOf(r.PropTypes.number),itemsPerPageLabel:r.PropTypes.string,searchLabel:r.PropTypes.string,searchPlaceholder:r.PropTypes.string},t.DatatablePageSizePickerPropTypes={label:r.PropTypes.string.isRequired,onChange:r.PropTypes.func.isRequired,value:r.PropTypes.number.isRequired,options:r.PropTypes.arrayOf(r.PropTypes.number).isRequired},t.DatatableSearchBarPropTypes={label:r.PropTypes.string.isRequired,onChange:r.PropTypes.func.isRequired,value:r.PropTypes.number.isRequired,placeholder:r.PropTypes.string.isRequired},t.Rows=r.PropTypes.array.isRequired),o=t.Header=r.PropTypes.shape({key:r.PropTypes.string.isRequired,label:r.PropTypes.string.isRequired}),i=t.DatatableHeaderPropTypes=r.PropTypes.arrayOf(o).isRequired;t.DatatableRowsPropTypes=r.PropTypes.shape({columns:o,rows:n}).isRequired,t.SpicyDatatablePropTypes={tableKey:r.PropTypes.string.isRequired,columns:i,rows:n,config:r.PropTypes.shape({itemsPerPageOptions:r.PropTypes.arrayOf(r.PropTypes.number),itemsPerPageLabel:r.PropTypes.string,nextPageLabel:r.PropTypes.string,previousPageLabel:r.PropTypes.string,searchLabel:r.PropTypes.string,searchPlaceholder:r.PropTypes.string,noEntriesLabel:r.PropTypes.string,entryCountLabels:r.PropTypes.arrayOf(r.PropTypes.string),customFilter:r.PropTypes.func})}},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),o=r(n),i=a(4),s=function(e){var t=e.label,a=e.onChange,r=e.value,n=e.placeholder;return o.default.createElement("div",{className:"spicy-datatableoptions-search"},o.default.createElement("label",{className:"spicy-datatableoptions-search--label"},t,o.default.createElement("input",{className:"spicy-datatableoptions-search--input",type:"text",onChange:a,defaultValue:r,placeholder:n})))};s.propTypes=i.DatatableSearchBarPropTypes,t.default=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DatatableOptionsDefaults={pageSizeOptions:[10,25,50,100],itemsPerPageLabel:"Entries per page:",searchLabel:"Search:",searchPlaceholder:"Type to search…"},t.PaginationDefaults={maxButtons:7,nextLabel:"Next",previousLabel:"Back"},t.SpicyDatatableDefaults={noEntiresLabel:"No entries to show.",entryCountLabels:["Showing","to","of","entries."]}},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),o=r(n),i=a(4),s=function(e){var t=e.columns;return o.default.createElement("thead",null,o.default.createElement("tr",null,t.map(function(e){return o.default.createElement("th",{key:e.key},e.label)})))};s.propTypes=i.DatatableHeaderPropTypes,t.default=s},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),o=r(n),i=a(4),s=function(e){var t=e.columns,a=e.rows;return a.map(function(e,a){return o.default.createElement("tr",{key:a,onClick:e.onClickHandler?function(t){return e.onClickHandler(t,e,a)}:function(){},style:{cursor:e.onClickHandler?"pointer":"default"},className:e.isActive?"spicy-datatable--selected-row":""},t.map(function(t,a){return o.default.createElement("td",{key:a},e[t.key])}))})};s.propTypes=i.DatatableRowsPropTypes,t.default=s},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(1),u=r(l),p=a(10),c=r(p),f=a(11),y=a(4),d=a(6),P=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"renderPagination",value:function(){var e=this,t=this.props,a=t.itemsPerPage,r=t.total,n=t.activePage,o=t.nextPageLabel,i=t.previousPageLabel,s=Math.ceil(r/a),l=1===n?1:n-1,p=n===s?s:n+1,y=[(0,c.default)("previous",this.handlePageButtonClick.bind(this,l),i||d.PaginationDefaults.previousLabel)],P=(0,f.getPaginationButtons)(d.PaginationDefaults.maxButtons,n,s).map(function(t,a){var r="spicy-datatable-pagination-button "+(t+1===n?"active":"");return"ellipsis"===t?u.default.createElement("li",{key:"ellipsis"+a,className:"spicy-datatable-pagination-button spicy-datatable-pagination-button-elipsis"},"…"):u.default.createElement("li",{key:t+1,className:r,onClick:e.handlePageButtonClick.bind(e,t+1)},u.default.createElement("span",null,t+1))});return y=y.concat(P),y.push((0,c.default)("next",this.handlePageButtonClick.bind(this,p),o||d.PaginationDefaults.nextLabel)),y}},{key:"handlePageButtonClick",value:function(e){var t=this.props.onPage;t&&t(e)}},{key:"render",value:function(){var e=this.renderPagination();return u.default.createElement("div",{className:"spicy-datatable-pagination-root"},u.default.createElement("ul",{className:"spicy-datatable-pagination-list",style:{float:"right"}},e))}}]),t}(l.Component);P.propTypes=y.PaginationPropTypes,t.default=P},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),o=r(n);t.default=function(e,t,a){return o.default.createElement("li",{key:e,className:"spicy-datatable-pagination-button "+e,onClick:t},a)}},function(e,t,a){"use strict";function r(e,t,a){var r=[],o=Math.floor(e/2);return a<=e?r=(0,n.range)(0,a):t<=o?(r=(0,n.range)(0,e-2),r.push("ellipsis"),r.push(a-1)):t>=a-1-o?(r=(0,n.range)(a-(e-2),a),r.unshift("ellipsis"),r.unshift(0)):(r=(0,n.range)(t-o+2,t+o-1),r.push("ellipsis"),r.push(a-1),r.unshift("ellipsis"),r.unshift(0)),r}Object.defineProperty(t,"__esModule",{value:!0}),t.getPaginationButtons=r;var n=a(12)},function(e,t){"use strict";function a(e,t){return e[t]?e[t]:i}function r(e,t,a,r){void 0===e[t]&&(e[t]={}),e[t][a]=r}function n(e,t){var a=0,r=0,n=[];t?(a=t,r=e):(r=0,a=e);for(var o=r;o<a;o++)n.push(o);return n}function o(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=[];return null===a||""===a?e:(e.map(function(e){t.some(function(t){if(void 0!==e[t.key]&&null!==e[t.key]){var n=String(e[t.key]).toLowerCase();if(n.length>=a.length&&n.indexOf(a.toLowerCase())>=0)return r.push(e),!0}})}),r)}Object.defineProperty(t,"__esModule",{value:!0}),t.getSafely=a,t.setSafely=r,t.range=n,t.filterRows=o;var i=t.defaultCache={searchQuery:""}}])});