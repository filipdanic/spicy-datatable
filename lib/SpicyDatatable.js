!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define("SpicyDatatable",["react"],t):"object"==typeof exports?exports.SpicyDatatable=t(require("react")):e.SpicyDatatable=t(e.React)}(this,function(e){return function(e){function t(a){if(r[a])return r[a].exports;var n=r[a]={exports:{},id:a,loaded:!1};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=r(1),u=a(l),c=r(2),p=a(c),f=r(4),y=a(f),h=r(3),P={},d="No entries to show.",g=["Showing","to","of","entries."],b=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=(0,h.getSafely)(P,e.tableKey).itemsPerPage||e.config&&e.config.itemsPerPageOptions?e.config.itemsPerPageOptions[0]:10;return r.state={itemsPerPage:a,currentPage:(0,h.getSafely)(P,e.tableKey).currentPage||1,searchQuery:(0,h.getSafely)(P,e.tableKey).searchQuery||""},r}return o(t,e),s(t,[{key:"componentDidUpdate",value:function(e,t){if(e.tableKey!==this.props.tableKey){var r=(0,h.getSafely)(P,this.props.tableKey).itemsPerPage||this.props.config&&this.props.config.itemsPerPageOptions?this.props.config.itemsPerPageOptions[0]:10,a=(0,h.getSafely)(P,this.props.tableKey).currentPage||1;this.setState({currentPage:a,itemsPerPage:r})}}},{key:"render",value:function(){var e=this.props,t=e.columns,r=e.rows,a=e.config,n=void 0===a?{}:a,i=this.state,o=i.itemsPerPage,s=i.currentPage,l=i.searchQuery,c=n.itemsPerPageOptions,f=n.itemsPerPageLabel,h=n.nextPageLabel,P=n.previousPageLabel,b=n.searchLabel,m=n.searchPlaceholder,v=n.noEntriesLabel,T=n.entryCountLabels,O=(n.customFilter,l.length>0),k=O?this.state.filteredRows:r,E=s*o,_=k.slice((s-1)*o,E),w=O?k.length:r.length,S=(s-1)*o+1,C=E>w?w:E,L=T||g;return u.default.createElement("div",null,u.default.createElement(y.default,{itemsPerPage:o,itemsPerPageOptions:c,itemsPerPageLabel:f,onPageSizeChange:this.handlePageSizeChange.bind(this),onSearch:this.handleSearchQueryChange.bind(this),searchLabel:b,searchPlaceholder:m}),u.default.createElement("table",{className:"spicy-datatable"},u.default.createElement("thead",null,u.default.createElement("tr",null,t.map(function(e){return u.default.createElement("th",{key:e.key},e.label)}))),u.default.createElement("tbody",null,_.map(function(e,r){return u.default.createElement("tr",{key:r,onClick:e.onClickHandler?e.onClickHandler:function(){},style:{cursor:e.onClickHandler?"pointer":"default"},className:e.isActive?"spicy-datatable--selected-row":""},t.map(function(t,r){return u.default.createElement("td",{key:r},e[t.key])}))}))),u.default.createElement("div",{className:"spicy-datatable-counter"},w>0?u.default.createElement("p",null,L[0]," ",S," ",L[1]," ",C," ",L[2]," ",w," ",L[3]):u.default.createElement("p",null,v||d)),u.default.createElement(p.default,{onPage:this.handlePagination.bind(this),itemsPerPage:o,total:w,activePage:s,nextPageLabel:h,previousPageLabel:P}))}},{key:"handlePagination",value:function(e){var t=this.props.tableKey;this.setState({currentPage:e}),(0,h.setSafely)(P,t,"currentPage",e)}},{key:"handleSearchQueryChange",value:function(e){var t=this,r=this.props,a=r.columns,n=r.rows,i=r.config,o=void 0===i?{}:i,s=e.target.value,l=this.props.tableKey,u=o.customFilter;this.scheduleQueryChange&&clearTimeout(this.scheduleQueryChange),this.scheduleQueryChange=setTimeout(function(){var e=u?u:h.filterRows,r=(0===s.length?[]:e(n,a,s))||[];t.setState({filteredRows:r,searchQuery:s,currentPage:1}),(0,h.setSafely)(P,l,"searchQuery",s),(0,h.setSafely)(P,l,"currentPage",1)},200)}},{key:"handlePageSizeChange",value:function(e){var t=e.target.value,r=this.props.tableKey;this.setState({itemsPerPage:Number(t),currentPage:1}),(0,h.setSafely)(P,r,"itemsPerPage",Number(t)),(0,h.setSafely)(P,r,"currentPage",1)}}]),t}(l.Component);b.propTypes={tableKey:l.PropTypes.string.isRequired,columns:l.PropTypes.arrayOf(l.PropTypes.shape({key:l.PropTypes.string,label:l.PropTypes.string})).isRequired,rows:l.PropTypes.array.isRequired,config:l.PropTypes.shape({itemsPerPageOptions:l.PropTypes.arrayOf(l.PropTypes.number),itemsPerPageLabel:l.PropTypes.string,nextPageLabel:l.PropTypes.string,previousPageLabel:l.PropTypes.string,searchLabel:l.PropTypes.string,searchPlaceholder:l.PropTypes.string,noEntriesLabel:l.PropTypes.string,entryCountLabels:l.PropTypes.arrayOf(l.PropTypes.string),customFilter:l.PropTypes.func})},t.default=b},function(t,r){t.exports=e},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=r(1),u=a(l),c=r(3),p=7,f="Next",y="Back",h=function(e,t,r){return u.default.createElement("li",{key:e,className:"spicy-datatable-pagination-button "+e,onClick:t},r)},P=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"renderPagination",value:function(){var e=this,t=this.props,r=t.itemsPerPage,a=t.total,n=t.activePage,i=t.nextPageLabel,o=t.previousPageLabel,s=Math.ceil(a/r),l=1===n?1:n-1,P=n===s?s:n+1,d=[h("previous",this.handlePageButtonClick.bind(this,l),o||y)],g=(0,c.getPaginationButtons)(p,n,s).map(function(t,r){var a="spicy-datatable-pagination-button "+(t+1===n?"active":"");return"ellipsis"===t?u.default.createElement("li",{key:"ellipsis"+r,className:"spicy-datatable-pagination-button spicy-datatable-pagination-button-elipsis"},"…"):u.default.createElement("li",{key:t+1,className:a,onClick:e.handlePageButtonClick.bind(e,t+1)},u.default.createElement("span",null,t+1))});return d=d.concat(g),d.push(h("next",this.handlePageButtonClick.bind(this,P),i||f)),d}},{key:"handlePageButtonClick",value:function(e){var t=this.props.onPage;t&&t(e)}},{key:"render",value:function(){var e=this.renderPagination();return u.default.createElement("div",{className:"spicy-datatable-pagination-root"},u.default.createElement("ul",{className:"spicy-datatable-pagination-list",style:{float:"right"}},e))}}]),t}(l.Component);P.propTypes={onPage:l.PropTypes.func.isRequired,itemsPerPage:l.PropTypes.number.isRequired,total:l.PropTypes.number.isRequired,activePage:l.PropTypes.number.isRequired,nextPageLabel:l.PropTypes.string,previousPageLabel:l.PropTypes.string},t.default=P},function(e,t){"use strict";function r(e,t){return e[t]?e[t]:s}function a(e,t,r,a){void 0===e[t]&&(e[t]={}),e[t][r]=a}function n(e,t){var r=0,a=0,n=[];t?(r=t,a=e):(a=0,r=e);for(var i=a;i<r;i++)n.push(i);return n}function i(e,t,r){var a=[],i=Math.floor(e/2);return r<=e?a=n(0,r):t<=i?(a=n(0,e-2),a.push("ellipsis"),a.push(r-1)):t>=r-1-i?(a=n(r-(e-2),r),a.unshift("ellipsis"),a.unshift(0)):(a=n(t-i+2,t+i-1),a.push("ellipsis"),a.push(r-1),a.unshift("ellipsis"),a.unshift(0)),a}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=[];return null===r||""===r?e:(e.map(function(e){t.map(function(t){if(void 0!==e[t.key]&&null!==e[t.key]){var n=String(e[t.key]).toLowerCase();n.length>=r.length&&n.indexOf(r.toLowerCase())>=0&&a.push(e)}})}),a)}Object.defineProperty(t,"__esModule",{value:!0}),t.getSafely=r,t.setSafely=a,t.range=n,t.getPaginationButtons=i,t.filterRows=o;var s=t.defaultCache={searchQuery:""}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=r(1),u=a(l),c=[10,25,50,100],p="Entries per page:",f="Search:",y="Type to search…",h=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.itemsPerPage,r=e.itemsPerPageLabel,a=e.itemsPerPageOptions,n=e.onSearch,i=e.onPageSizeChange,o=e.searchLabel,s=e.searchPlaceholder,l=a||c;return u.default.createElement("div",{className:"spicy-datatableoptions-wrapper"},u.default.createElement("div",{className:"spicy-datatableoptions-sizepicker"},r||p,u.default.createElement("select",{onChange:i,value:t,className:"spicy-datatableoptions-sizepicker--selectfield"},l.map(function(e,t){return u.default.createElement("option",{key:"select-"+e+"-{i}",value:e},e)}))),u.default.createElement("div",{className:"spicy-datatableoptions-search"},u.default.createElement("label",{className:"spicy-datatableoptions-search--label"},o||f,u.default.createElement("input",{className:"spicy-datatableoptions-search--input",type:"text",onChange:n,placeholder:s||y}))))}}]),t}(l.Component);h.propTypes={itemsPerPage:l.PropTypes.number.isRequired,onSearch:l.PropTypes.func.isRequired,onPageSizeChange:l.PropTypes.func.isRequired,itemsPerPageOptions:l.PropTypes.arrayOf(l.PropTypes.number),itemsPerPageLabel:l.PropTypes.string,searchLabel:l.PropTypes.string,searchPlaceholder:l.PropTypes.string},t.default=h}])});