!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("prop-types")):"function"==typeof define&&define.amd?define("SpicyDatatable",["react","prop-types"],t):"object"==typeof exports?exports.SpicyDatatable=t(require("react"),require("prop-types")):e.SpicyDatatable=t(e.React,e.PropTypes)}(this,function(e,t){return function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(t,a){t.exports=e},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpicyDatatablePropTypes=t.DatatableRowsPropTypes=t.DatatableHeaderPropTypes=t.Header=t.Rows=t.DatatableSearchBarPropTypes=t.DatatablePageSizePickerPropTypes=t.DatatableOptionsPropTypes=void 0;var n=a(15),r=function(e){return e&&e.__esModule?e:{default:e}}(n),o=(t.DatatableOptionsPropTypes={itemsPerPage:r.default.number.isRequired,searchValue:r.default.string.isRequired,onSearch:r.default.func.isRequired,onPageSizeChange:r.default.func.isRequired,itemsPerPageOptions:r.default.arrayOf(r.default.number),itemsPerPageLabel:r.default.string,searchLabel:r.default.string,searchPlaceholder:r.default.string,onDownloadCSV:r.default.func,showDownloadCSVButton:r.default.bool,downloadCSVButtonLabel:r.default.string},t.DatatablePageSizePickerPropTypes={label:r.default.string.isRequired,onChange:r.default.func.isRequired,value:r.default.number.isRequired,options:r.default.arrayOf(r.default.number).isRequired},t.DatatableSearchBarPropTypes={label:r.default.string.isRequired,onChange:r.default.func.isRequired,value:r.default.number.isRequired,placeholder:r.default.string.isRequired},t.Rows=r.default.array.isRequired),i=t.Header=r.default.shape({key:r.default.string.isRequired,label:r.default.string.isRequired}),l=t.DatatableHeaderPropTypes=r.default.arrayOf(i).isRequired;t.DatatableRowsPropTypes=r.default.shape({columns:i,rows:o}).isRequired,t.SpicyDatatablePropTypes={tableKey:r.default.string.isRequired,columns:l,rows:o,config:r.default.shape({itemsPerPageOptions:r.default.arrayOf(r.default.number),itemsPerPageLabel:r.default.string,nextPageLabel:r.default.string,previousPageLabel:r.default.string,searchLabel:r.default.string,searchPlaceholder:r.default.string,noEntriesLabel:r.default.string,entryCountLabels:r.default.arrayOf(r.default.string),customFilter:r.default.func,showDownloadCSVButton:r.default.bool,downloadCSVButtonLabel:r.default.string})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DatatableOptionsDefaults={pageSizeOptions:[10,25,50,100],itemsPerPageLabel:"Entries per page:",searchLabel:"Search:",searchPlaceholder:"Type to search…",downloadCSVButtonLabel:"Export CSV"},t.PaginationDefaults={maxButtons:7,nextLabel:"Next",previousLabel:"Back"},t.SpicyDatatableDefaults={noEntiresLabel:"No entries to show.",entryCountLabels:["Showing","to","of","entries."]}},function(e,t,a){"use strict";function n(e,t){return e[t]?e[t]:l}function r(e,t,a,n){void 0===e[t]&&(e[t]={}),e[t][a]=n}function o(e,t){var a=0,n=0,r=[];t?(a=t,n=e):(n=0,a=e);for(var o=n;o<a;o++)r.push(o);return r}function i(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=[];return null===a||""===a?e:(e.forEach(function(e){t.some(function(t){if(void 0!==e[t.key]&&null!==e[t.key]){var r=String(e[t.key]).toLowerCase();if(r.length>=a.length&&r.indexOf(a.toLowerCase())>=0)return n.push(e),!0}return!1})}),n)}Object.defineProperty(t,"__esModule",{value:!0}),t.getSafely=n,t.setSafely=r,t.range=o,t.filterRows=i;var l=t.defaultCache={searchQuery:""}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n),o=a(1),i=function(e){var t=e.columns;return r.default.createElement("thead",null,r.default.createElement("tr",null,t.map(function(e){return r.default.createElement("th",{key:e.key},e.label)})))};i.propTypes=o.DatatableHeaderPropTypes,t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),s=n(u),c=a(10),f=n(c),d=a(11),p=n(d),h=a(1),y=a(2),b=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.itemsPerPage,a=e.itemsPerPageLabel,n=e.itemsPerPageOptions,r=e.onPageSizeChange,o=e.onSearch,i=e.searchValue,l=e.searchLabel,u=e.searchPlaceholder,c=e.onDownloadCSV,d=e.showDownloadCSVButton,h=e.downloadCSVButtonLabel,b=n||y.DatatableOptionsDefaults.pageSizeOptions;return s.default.createElement("div",{className:"spicy-datatableoptions-wrapper"},s.default.createElement("div",null,(0,f.default)({label:a||y.DatatableOptionsDefaults.itemsPerPageLabel,onChange:r,value:t,options:b}),(0,p.default)({label:l||y.DatatableOptionsDefaults.searchLabel,value:i,onChange:o,placeholder:u||y.DatatableOptionsDefaults.searchPlaceholder})),d?s.default.createElement("div",{className:"spicy-datatableoptions-export--button-wrapper"},s.default.createElement("button",{className:"spicy-datatableoptions-export--button",onClick:c},h||y.DatatableOptionsDefaults.downloadCSVButtonLabel)):null)}}]),t}(u.Component);b.propTypes=h.DatatableOptionsPropTypes,t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n),o=a(1),i=function(e){var t=e.columns;return e.rows.map(function(e,a){return r.default.createElement("tr",{key:a,onClick:e.onClickHandler?function(t){return e.onClickHandler(t,e,a)}:function(){},style:{cursor:e.onClickHandler?"pointer":"default"},className:e.isActive?"spicy-datatable--selected-row":""},t.map(function(t,a){return r.default.createElement("td",{key:a},e[t.key])}))})};i.propTypes=o.DatatableRowsPropTypes,t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),s=n(u),c=a(12),f=n(c),d=a(13),p=a(1),h=a(2),y=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"renderPagination",value:function(){var e=this,t=this.props,a=t.itemsPerPage,n=t.total,r=t.activePage,o=t.nextPageLabel,i=t.previousPageLabel,l=Math.ceil(n/(a||1)),u=1===r?1:r-1,c=r===l?l:r+1,p=[(0,f.default)("previous",this.handlePageButtonClick.bind(this,u),i||h.PaginationDefaults.previousLabel)],y=(0,d.getPaginationButtons)(h.PaginationDefaults.maxButtons,r,l).map(function(t,a){var n="spicy-datatable-pagination-button "+(t+1===r?"active":"");return"ellipsis"===t?s.default.createElement("li",{key:"ellipsis"+a,className:"spicy-datatable-pagination-button spicy-datatable-pagination-button-elipsis"},"…"):s.default.createElement("li",{key:t+1,className:n,onClick:e.handlePageButtonClick.bind(e,t+1)},s.default.createElement("span",null,t+1))});return p=p.concat(y),p.push((0,f.default)("next",this.handlePageButtonClick.bind(this,c),o||h.PaginationDefaults.nextLabel)),p}},{key:"handlePageButtonClick",value:function(e){var t=this.props.onPage;t&&t(e)}},{key:"render",value:function(){var e=this.renderPagination();return s.default.createElement("div",{className:"spicy-datatable-pagination-root"},s.default.createElement("ul",{className:"spicy-datatable-pagination-list",style:{float:"right"}},e))}}]),t}(u.Component);y.propTypes=p.PaginationPropTypes,t.default=y},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(14),i=function(e){return e&&e.__esModule?e:{default:e}}(o),l=function(){function e(t){n(this,e),this.options=t||{}}return r(e,[{key:"createCSVBlob",value:function(e){return this.createCSV(e)}},{key:"dataToString",value:function(e){return this.createCSV(e,"string")}},{key:"createCSV",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blob",a=this.options||{},n=a.columns,r=a.contentType,o=a.delimeter,l=a.formatters,u=a.headers,s=a.includeHeaders,c=r||"text/csv",f=o||",",d=l||{},p=function(e){return d[e]||function(e){return e}},h=u||{},y=n||Object.getOwnPropertyNames(e[0]),b=s,g=new i.default(f,c);return(void 0===b||b)&&(y.forEach(function(e){return g.writeValue(h[e]||e)}),g.writeLine()),e.forEach(function(e){y.forEach(function(t){return g.writeValue(p(t)(e[t]))}),g.writeLine()}),"string"===t?g.toString():g.toBlob()}},{key:"download",value:function(e,t){if(navigator.msSaveBlob)return void navigator.msSaveBlob(e,t);var a=document.createElement("A"),n=URL.createObjectURL(e);a.href=n,a.download=t,a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}},{key:"downloadCSV",value:function(e){try{var t=this.createCSV(e,"blob"),a=this.options.filename||"export-"+((new Date).getTime()/1e3|0)+".csv";this.download(t,a)}catch(e){this.options.devMode&&console.error("Error downloading CSV. Send this log to the developers: \n",e),this.options.onError&&this.options.onError(e)}}},{key:"toString",value:function(e){new i.default(delimiter,contentType)}}],[{key:"create",value:function(t){return new e(t)}},{key:"download",value:function(t){return new e(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).downloadCSV(t)}}]),e}();t.default=l},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),s=n(u),c=a(8),f=n(c),d=a(5),p=n(d),h=a(4),y=n(h),b=a(6),g=n(b),P=a(7),v=n(P),m=a(1),w=a(3),S=a(2),C={},_=function(e){function t(e){r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handlePagination=a.handlePagination.bind(a),a.handlePageSizeChange=a.handlePageSizeChange.bind(a),a.handleSearchQueryChange=a.handleSearchQueryChange.bind(a),a.handleDownloadCSV=a.handleDownloadCSV.bind(a);var n=(0,w.getSafely)(C,e.tableKey).itemsPerPage||(e.config&&e.config.itemsPerPageOptions?e.config.itemsPerPageOptions[0]:10);if(a.state={itemsPerPage:n,currentPage:(0,w.getSafely)(C,e.tableKey).currentPage||1,searchQuery:(0,w.getSafely)(C,e.tableKey).searchQuery||""},a.state.searchQuery.length>0){var i=e.customFilter?e.customFilter:w.filterRows,l=i(e.rows,e.columns,a.state.searchQuery)||[];a.setState({filteredRows:l})}return a}return i(t,e),l(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.scheduleQueryChange)}},{key:"componentDidUpdate",value:function(e,t){if(e.tableKey!==this.props.tableKey){var a=(0,w.getSafely)(C,this.props.tableKey).itemsPerPage||(this.props.config&&this.props.config.itemsPerPageOptions?this.props.config.itemsPerPageOptions[0]:10),n=(0,w.getSafely)(C,this.props.tableKey).currentPage||1;this.setState({currentPage:n,itemsPerPage:a})}}},{key:"render",value:function(){var e=this.props,t=e.columns,a=e.rows,n=void 0===a?[]:a,r=e.config,o=void 0===r?{}:r,i=this.state||{},l=i.itemsPerPage,u=i.currentPage,c=i.searchQuery,f=void 0===c?"":c,d=i.filteredRows,h=void 0===d?[]:d,b=o.itemsPerPageOptions,P=o.itemsPerPageLabel,m=o.nextPageLabel,w=o.previousPageLabel,C=o.searchLabel,_=o.searchPlaceholder,O=o.noEntriesLabel,k=o.entryCountLabels,D=o.showDownloadCSVButton,E=o.downloadCSVButtonLabel,L=f.length>0,T=L?h:n,j=u*l,R=T&&T.length>0?T.slice((u-1)*l,j):[],V=L?T.length:n.length,x=(u-1)*l+1,B=j>V?V:j,M=k||S.SpicyDatatableDefaults.entryCountLabels;return s.default.createElement("div",null,s.default.createElement(p.default,{itemsPerPage:l,itemsPerPageOptions:b,itemsPerPageLabel:P,onPageSizeChange:this.handlePageSizeChange,onSearch:this.handleSearchQueryChange,searchValue:f,searchLabel:C,searchPlaceholder:_,showDownloadCSVButton:D,downloadCSVButtonLabel:E,onDownloadCSV:this.handleDownloadCSV.bind(this,T)}),s.default.createElement("table",{className:"spicy-datatable"},(0,y.default)({columns:t}),s.default.createElement("tbody",null,(0,g.default)({columns:t,rows:R}))),s.default.createElement("div",{className:"spicy-datatable-counter"},V>0?s.default.createElement("p",null,M[0]," ",x," ",M[1]," ",B," ",M[2]," ",V," ",M[3]):s.default.createElement("p",null,O||S.SpicyDatatableDefaults.noEntiresLabel)),s.default.createElement(v.default,{onPage:this.handlePagination,itemsPerPage:l,total:V,activePage:u,nextPageLabel:m,previousPageLabel:w}))}},{key:"handlePagination",value:function(e){var t=this.props.tableKey;this.setState({currentPage:e}),(0,w.setSafely)(C,t,"currentPage",e)}},{key:"handleSearchQueryChange",value:function(e){var t=this,a=this.props,n=a.columns,r=a.rows,o=a.config,i=void 0===o?{}:o,l=e.target.value,u=this.props.tableKey,s=i.customFilter;this.scheduleQueryChange&&clearTimeout(this.scheduleQueryChange),this.scheduleQueryChange=setTimeout(function(){var e=s||w.filterRows,a=(0===l.length?[]:e(r,n,l))||[];t.setState({filteredRows:a,searchQuery:l,currentPage:1}),(0,w.setSafely)(C,u,"searchQuery",l),(0,w.setSafely)(C,u,"currentPage",1)},200)}},{key:"handlePageSizeChange",value:function(e){var t=e.target.value,a=this.props.tableKey;this.setState({itemsPerPage:Number(t),currentPage:1}),(0,w.setSafely)(C,a,"itemsPerPage",Number(t)),(0,w.setSafely)(C,a,"currentPage",1)}},{key:"handleDownloadCSV",value:function(e){f.default.download(e,{columns:this.props.columns.map(function(e){return e.key})})}}]),t}(u.Component);_.propTypes=m.SpicyDatatablePropTypes,t.default=_},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n),o=a(1),i=function(e){var t=e.label,a=e.onChange,n=e.value,o=e.options;return r.default.createElement("div",{className:"spicy-datatableoptions-sizepicker"},t,r.default.createElement("select",{onChange:a,value:n,className:"spicy-datatableoptions-sizepicker--selectfield"},o.map(function(e,t){return r.default.createElement("option",{key:"select-"+e+"-{i}",value:e},e)})))};i.propTypes=o.DatatablePageSizePickerPropTypes,t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n),o=a(1),i=function(e){var t=e.label,a=e.onChange,n=e.value,o=e.placeholder;return r.default.createElement("div",{className:"spicy-datatableoptions-search"},r.default.createElement("label",{className:"spicy-datatableoptions-search--label"},t,r.default.createElement("input",{className:"spicy-datatableoptions-search--input",type:"text",onChange:a,defaultValue:n,placeholder:o})))};i.propTypes=o.DatatableSearchBarPropTypes,t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t,a){return r.default.createElement("li",{key:e,className:"spicy-datatable-pagination-button "+e,onClick:t},a)}},function(e,t,a){"use strict";function n(e,t,a){var n=[],o=Math.floor(e/2);return a<=e?n=(0,r.range)(0,a):t<=o?(n=(0,r.range)(0,e-2),n.push("ellipsis"),n.push(a-1)):t>=a-1-o?(n=(0,r.range)(a-(e-2),a),n.unshift("ellipsis"),n.unshift(0)):(n=(0,r.range)(t-o+2,t+o-1),n.push("ellipsis"),n.push(a-1),n.unshift("ellipsis"),n.unshift(0)),n}Object.defineProperty(t,"__esModule",{value:!0}),t.getPaginationButtons=n;var r=a(3)},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:",",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text/csv";n(this,e),this.delimiter=t,this.contentType=a,this.rows=[[]]}return r(e,[{key:"wrapWithQuotes",value:function(e){return'"'+e.replace(/"/g,'""')+'"'}},{key:"writeValue",value:function(e){var t=void 0===e?"":String(e),a=-1!==t.indexOf(this.delimiter)||/"\r\n/.test(t);this.currentRow.push(a?this.wrapWithQuotes(t):t)}},{key:"writeLine",value:function(){this.rows.push([])}},{key:"toString",value:function(){var e=this;return this.rows.map(function(t){return t.join(e.delimiter)}).reduce(function(e,t){return e+"\r\n"+t})}},{key:"toBlob",value:function(){return new Blob([this.toString()],{type:this.contentType})}},{key:"currentRow",get:function(){return this.rows[this.rows.length-1]}}]),e}();t.default=o},function(e,a){e.exports=t}])});